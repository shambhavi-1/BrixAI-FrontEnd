<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BrixAI Dashboard - Smart Construction Management</title>
  <link rel="stylesheet" href="./style.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèóÔ∏è</text></svg>">
</head>

<body>
  <div class="container">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
      <div class="brand">
        <div class="logo">BP</div>
        <div>
          <h1>BrixAI</h1>
          <small>Site assistant ‚Ä¢ Voice ¬∑ Photo ¬∑ Tasks</small>
        </div>
      </div>

      <div class="user-profile">
        <div class="user-avatar" id="sideAvatar">U</div>
        <div>
          <div id="sideName">User</div>
          <div class="role" id="sideRole">Role</div>
        </div>
        <button class="btn btn-ghost" id="btnSwitch">Switch</button>
        <button class="btn btn-primary" id="btnCreate">+ New Project</button>
      </div>
    </div>

    <!-- Dashboard Layout -->
    <div class="dashboard-layout">
      <!-- Sidebar (not full height) -->
      <div class="sidebar" style="max-height: 70vh; overflow-y: auto;">
        <h3>Features</h3>
        <div class="sidebar-item active" data-page="home">
          üè† Dashboard
        </div>
        <div class="sidebar-item" data-page="report">
          üì£ Report Progress
        </div>
        <div class="sidebar-item" data-page="feed">
          üì∞ Activity Feed
        </div>
        <div class="sidebar-item" data-page="tasks">
          üßæ Task Management
        </div>
        <div class="sidebar-item" data-page="materials">
          üì¶ Materials & Inventory
        </div>
        <div class="sidebar-item" data-page="attendance">
          üïí Attendance Tracking
        </div>
        <div class="sidebar-item" data-page="issues">
          ‚ö†Ô∏è Issue Reports
        </div>
        <div class="sidebar-item" data-page="ai">
          ü§ñ AI Assistant
        </div>
        <div class="sidebar-item" data-page="settings">
          ‚öô Settings
        </div>

        <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--glass-border);">
          <input id="projectInput" placeholder="Project code or name" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.8); margin-bottom: 0.5rem;" />
          <button class="btn btn-secondary" id="projectCreateBtn" style="width: 100%;">Create Project</button>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="main-content">
        <!-- Home Page -->
        <div class="card" id="page-home">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <div>
              <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.25rem;">Project Overview</div>
              <div style="font-weight: 700; font-size: 1.5rem;" id="dashboardTitle">Demo Project</div>
              <div style="color: var(--text-secondary); font-size: 0.9rem;">Project: <strong id="projectCode">BP-DEMO</strong></div>
            </div>
            <div style="display: flex; gap: 0.75rem;">
              <button class="btn btn-ghost" id="btnAISummary">AI Summary</button>
              <button class="btn btn-primary" id="btnNewTask">+ New Task</button>
            </div>
          </div>

          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="value" id="kpiTasks">0</div>
              <div class="label">Tasks Today</div>
            </div>
            <div class="kpi-card">
              <div class="value" id="kpiIssues">0</div>
              <div class="label">Open Issues</div>
            </div>
            <div class="kpi-card">
              <div class="value" id="kpiWorkers">0</div>
              <div class="label">Active Workers</div>
            </div>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 320px; gap: 1.5rem; margin-top: 2rem;">
            <div>
              <h3 style="margin-bottom: 1rem;">Quick Actions</h3>
              <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
                <div class="card" id="quickVoice" style="cursor: pointer; text-align: center; padding: 1.5rem;">
                  <div style="font-size: 2rem; margin-bottom: 0.5rem;">üé§</div>
                  <div style="font-weight: 600;">Voice Report</div>
                  <div style="color: var(--text-secondary); font-size: 0.9rem;">Speak your update</div>
                </div>
                <div class="card" id="quickPhoto" style="cursor: pointer; text-align: center; padding: 1.5rem;">
                  <div style="font-size: 2rem; margin-bottom: 0.5rem;">üì∏</div>
                  <div style="font-weight: 600;">Photo Report</div>
                  <div style="color: var(--text-secondary); font-size: 0.9rem;">Upload an image</div>
                </div>
                <div class="card" id="quickText" style="cursor: pointer; text-align: center; padding: 1.5rem;">
                  <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚úçÔ∏è</div>
                  <div style="font-weight: 600;">Text Report</div>
                  <div style="color: var(--text-secondary); font-size: 0.9rem;">Write a quick note</div>
                </div>
              </div>

              <h3 style="margin-bottom: 1rem;">Recent Activity</h3>
              <div class="card">
                <div id="dashboardFeed" style="color: var(--text-secondary);"></div>
              </div>
            </div>

            <div>
              <div class="card">
                <h3>Materials Status</h3>
                <div id="materialsAlert" style="margin-top: 0.5rem; color: var(--text-secondary);">All materials in stock</div>
              </div>

              <div class="card" style="margin-top: 1rem;">
                <h3>AI Prediction</h3>
                <div id="predictBox" style="margin-top: 0.5rem; color: var(--text-secondary);">No prediction yet</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Report Page -->
        <div class="card" id="page-report" style="display: none;">
          <h3>Report Work</h3>
          <p style="color: var(--text-secondary); margin: 0.5rem 0 1rem 0;">Record voice, upload a photo, or write a quick text report.</p>
          <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
            <button class="btn btn-ghost" id="reportVoice">üé§ Record Voice</button>
            <button class="btn btn-ghost" id="reportPhoto">üì∏ Upload Photo</button>
            <button class="btn btn-ghost" id="reportText">‚úçÔ∏è Quick Text</button>
          </div>
          <div id="reportFeedback" style="color: var(--text-secondary);"></div>
        </div>

        <!-- Feed Page -->
        <div class="card" id="page-feed" style="display: none;">
          <h3>Field Feed</h3>
          <div id="feedList" style="margin-top: 1rem;"></div>
        </div>

        <!-- Tasks Page -->
        <div class="card" id="page-tasks" style="display: none;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h3>Task Board</h3>
            <div style="color: var(--text-secondary); font-size: 1.5rem;">Click a task to edit</div>
          </div>
          <div id="taskBoard" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;"></div>
        </div>

        <!-- Materials Page -->
        <div class="card" id="page-materials" style="display: none;">
          <h3>Materials & Inventory</h3>
          <table style="width: 100%; margin-top: 1rem; border-collapse: collapse;">
            <thead>
              <tr style="color: var(--text-secondary); text-align: left;">
                <th style="padding: 0.75rem; border-bottom: 1px solid var(--glass-border);">Item</th>
                <th style="padding: 0.75rem; border-bottom: 1px solid var(--glass-border);">On Site</th>
                <th style="padding: 0.75rem; border-bottom: 1px solid var(--glass-border);">Threshold</th>
                <th style="padding: 0.75rem; border-bottom: 1px solid var(--glass-border);">Action</th>
              </tr>
            </thead>
            <tbody id="materialsTable"></tbody>
          </table>
        </div>

        <!-- Attendance Page -->
        <div class="card" id="page-attendance" style="display: none;">
          <h3>Attendance</h3>
          <div style="display: flex; gap: 0.75rem; margin: 1rem 0;">
            <button class="btn btn-primary" id="btnCheckIn">Check In</button>
            <button class="btn btn-ghost" id="btnCheckOut">Check Out</button>
          </div>
          <div>
            <h4 style="margin-bottom: 0.5rem;">Active Crew</h4>
            <ul id="crewList" style="color: var(--text-secondary);"></ul>
          </div>
        </div>

        <!-- Issues Page -->
        <div class="card" id="page-issues" style="display: none;">
          <h3>Issue Reports</h3>
          <p style="color: var(--text-secondary); margin: 0.5rem 0 1rem 0;">View and manage reported issues on the construction site.</p>
          <div id="issuesList" style="margin-top: 1rem;"></div>
        </div>

        <!-- AI Assistant Page -->
        <div class="card" id="page-ai" style="display: none;">
          <h3>AI Assistant</h3>
          <p style="color: var(--text-secondary); margin: 0.5rem 0 1rem 0;">Get AI-powered insights and assistance for your construction project.</p>
          <div style="margin-top: 1rem;">
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Ask BrixAI</label>
              <input id="aiQuery" placeholder="e.g., Summarize today's progress" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.8);" />
            </div>
            <button class="btn btn-primary" id="askAI">Ask AI</button>
            <div id="aiResponse" style="margin-top: 1rem; color: var(--text-secondary);"></div>
          </div>
        </div>

        <!-- Settings Page -->
        <div class="card" id="page-settings" style="display: none;">
          <h3>Project Settings</h3>
          <div style="margin-top: 1rem;">
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Project Name</label>
              <input id="settingProject" placeholder="Demo Project" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.8);" />
            </div>
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Default Language</label>
              <select id="settingLang" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.8);">
                <option>English</option>
                <option>Hindi</option>
              </select>
            </div>
            <button class="btn btn-primary" id="saveSettings">Save Settings</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="dashboard-footer">
      <p>&copy; 2025 BrixAI - Smart Construction Management. Powered by AI for better building.</p>
    </div>
  </div>

  <!-- Floating AI Assistant -->
  <div style="position: fixed; bottom: 2rem; right: 2rem; z-index: 1000;">
    <div id="assistantPanel" style="display: none; position: absolute; bottom: 5rem; right: 0; width: 350px; background: var(--bg-card); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: var(--border-radius); box-shadow: var(--shadow-heavy); padding: 1rem;">
      <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
        <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">AI</div>
        <div style="flex: 1;">
          <div style="font-weight: 600;">BrixAI</div>
          <div style="color: var(--text-secondary); font-size: 0.8rem;">Ask: "Summarize today"</div>
        </div>
        <button class="btn btn-ghost" id="assistantClose" style="padding: 0.25rem;">√ó</button>
      </div>
      <div id="assistantBody" style="max-height: 200px; overflow-y: auto; margin-bottom: 1rem; color: var(--text-secondary);"></div>
      <div style="display: flex; gap: 0.5rem;">
        <input id="assistantInput" placeholder="Ask BrixAI..." style="flex: 1; padding: 0.5rem; border-radius: 20px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.8);" />
        <button class="btn btn-primary" id="assistantSend" style="border-radius: 50%; width: 40px; height: 40px; padding: 0;">‚Üí</button>
      </div>
    </div>
    <button id="assistantToggle" style="width: 60px; height: 60px; border-radius: 50%; background: var(--primary); color: white; border: none; font-size: 1.5rem; cursor: pointer; box-shadow: var(--shadow-medium); transition: var(--transition);">AI</button>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); z-index: 9999; display: flex; align-items: center; justify-content: center;">
    <div style="background: var(--bg-card); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: var(--border-radius); padding: 2rem; max-width: 400px; width: 90%; box-shadow: var(--shadow-heavy);">
      <h3 style="margin-bottom: 1rem;">Sign in / Switch User</h3>
      <div style="margin-bottom: 1rem;">
        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Name</label>
        <input id="loginName" placeholder="Enter your name" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.8);" />
      </div>
      <div style="margin-bottom: 1.5rem;">
        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Role</label>
        <select id="loginRole" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.8);">
          <option value="manager">Manager</option>
          <option value="engineer">Engineer</option>
          <option value="mistri">Supervisor (Mestri)</option>
          <option value="labor">Labor</option>
          <option value="vendor">Vendor</option>
          <option value="safety">Safety Officer</option>
        </select>
      </div>
      <div style="display: flex; justify-content: flex-end; gap: 0.75rem;">
        <button id="loginCancel" class="btn btn-ghost">Cancel</button>
        <button id="loginOK" class="btn btn-primary">Sign In</button>
      </div>
    </div>
  </div>

  <script src="./js/dashboard.js"></script>
</body>
</html>
